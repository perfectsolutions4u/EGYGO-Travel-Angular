import{a as P}from"./chunk-76TZD4YX.js";import{a as M}from"./chunk-SCMBDYDL.js";import"./chunk-CARY4E7O.js";import{c as L,e as v,h as E,i as O,j as T,l as h,n as I,q as k,r as D,z as N}from"./chunk-SNC4FUU2.js";import{a as A}from"./chunk-UY3LTWP4.js";import{a as q}from"./chunk-OMUTOIIO.js";import"./chunk-WMXFERAF.js";import{Aa as b,Ea as l,Eb as m,Ec as w,Fa as g,Fc as F,Nb as S,Va as c,Xa as s,aa as C,gb as i,hb as o,ib as p,kc as x,pb as f,qc as y,rb as _}from"./chunk-D6PZ3OCI.js";function B(n,u){n&1&&(i(0,"span"),m(1,"email required"),o())}function G(n,u){if(n&1&&(i(0,"div",25),c(1,B,2,0,"span",26),o()),n&2){let e,r=_();l(),s("ngIf",(e=r.loginForm.get("email"))==null?null:e.getError("required"))}}function R(n,u){n&1&&(i(0,"span"),m(1,"password required"),o())}function j(n,u){if(n&1&&(i(0,"div",25),c(1,R,2,0,"span",26),o()),n&2){let e,r=_();l(),s("ngIf",(e=r.loginForm.get("password"))==null?null:e.getError("required"))}}function z(n,u){n&1&&p(0,"i",27)}var ee=(()=>{class n{constructor(e,r,t,a){this._DataService=e,this._AuthService=r,this.toastr=t,this._Router=a,this.bannerTitle="login",this.isLoading=!1,this.countryList=[],this.loginForm=new T({email:new h("",[v.required]),password:new h("",[v.required])})}ngOnInit(){this.getSettings(),this.getCountries()}getSettings(){this._DataService.getSetting().subscribe({next:e=>{console.log(e.data);let r=e.data.find(a=>a.option_key==="logo");this.logo=r?.option_value[0];let t=e.data.find(a=>a.option_key==="site_title");this.siteTitle=t?.option_value[0]},error:e=>{}})}getCountries(){this._DataService.getCountries().subscribe({next:e=>{console.log(e.data),this.countryList=e.data}})}handleLoginForm(){this.loginForm.valid&&(this.isLoading=!0,this._AuthService.setlogin(this.loginForm.value).subscribe({next:e=>{e.status===!0?(console.log(e),this.toastr.success(e.message),this._Router.navigate([""])):this.toastr.error("Login failed")},error:e=>{this.toastr.error(e?.error?.message??"Login error")}}))}handleForgetPass(e){console.log(e),this._AuthService.setForgetPass(e).subscribe({next:r=>{console.log(r),this.toastr.success(r.message)}})}static{this.\u0275fac=function(r){return new(r||n)(g(q),g(P),g(M),g(w))}}static{this.\u0275cmp=C({type:n,selectors:[["app-login"]],standalone:!0,features:[S],decls:36,vars:9,consts:[[1,"mb-5"],[3,"bannerTitle"],[1,"my-5","py-5"],[1,"container"],[1,"col-lg-6","col-md-8","mx-auto"],[1,"specialBorder","bg-white","p-4","sideBar"],[1,"text-center"],["width","200px","height","70px",3,"src","alt","title"],[1,"fs-5"],[1,"",3,"ngSubmit","formGroup"],[1,"mb-3"],["for","email",1,"textSecondColor","text-capitalize","fw-bold","mb-2"],[1,"item","position-relative"],["type","email","id","email","formControlName","email","placeholder","Your Email ",1,"form-control","p-2","ps-5","rounded-3"],[1,"fa-regular","fa-envelope","textMainColor"],["class","alert alert-danger mt-2",4,"ngIf"],["for","password",1,"textSecondColor","text-capitalize","fw-bold","mb-2"],["type","password","id","password","formControlName","password","placeholder","Your Password ",1,"form-control","p-2","ps-5","rounded-3"],[1,"fa","fa-lock","textMainColor"],["routerLink","/forgetPassword",1,"my-2","textMainColor","fw-bold","cPointer","text-capitalize",3,"click"],["type","submit",1,"mainBtn","Btn","mb-3","w-100",3,"disabled"],["class","fa-solid fa-spinner fa-spin me-1 border-0 bg-transparent text-white",4,"ngIf"],[1,"fa","fa-paper-plane","mx-2","border-0","bg-transparent","text-white"],[1,"my-2","text-center"],["routerLink","/signup",1,"textMainColor","fw-bold","cPointer"],[1,"alert","alert-danger","mt-2"],[4,"ngIf"],[1,"fa-solid","fa-spinner","fa-spin","me-1","border-0","bg-transparent","text-white"]],template:function(r,t){if(r&1&&(i(0,"div",0),p(1,"app-banner",1),o(),i(2,"section",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),p(7,"img",7),i(8,"p",8),m(9,"Create your tavelo account"),o()(),i(10,"form",9),f("ngSubmit",function(){return t.handleLoginForm()}),i(11,"div",10)(12,"label",11),m(13,"email address"),o(),i(14,"div",12),p(15,"input",13)(16,"i",14),o(),c(17,G,2,1,"div",15),o(),i(18,"div",10)(19,"label",16),m(20,"password"),o(),i(21,"div",12),p(22,"input",17)(23,"i",18),o(),c(24,j,2,1,"div",15),o(),i(25,"p",19),f("click",function(){let d;return t.handleForgetPass((d=t.loginForm.get("email"))==null?null:d.value)}),m(26," forget password ? "),o(),i(27,"button",20),c(28,z,1,0,"i",21),p(29,"i",22),m(30," log in "),o()(),p(31,"div"),i(32,"p",23),m(33," Don't have an account? "),i(34,"span",24),m(35,"Sign Up."),o()()()()()()),r&2){let a,d;l(),s("bannerTitle",t.bannerTitle),l(6),s("src",t.logo,b)("alt",t.siteTitle)("title",t.siteTitle),l(3),s("formGroup",t.loginForm),l(7),s("ngIf",((a=t.loginForm.get("email"))==null?null:a.errors)&&((a=t.loginForm.get("email"))==null?null:a.touched)),l(7),s("ngIf",((d=t.loginForm.get("password"))==null?null:d.errors)&&((d=t.loginForm.get("password"))==null?null:d.touched)),l(3),s("disabled",t.loginForm.invalid),l(),s("ngIf",t.isLoading)}},dependencies:[F,N,I,L,E,O,k,D,y,x,A],styles:['.item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;top:12px;left:15px}.item[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]::-webkit-datetime-edit{color:transparent}.item[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]:focus::-webkit-datetime-edit, .item[_ngcontent-%COMP%]   input[type=date].filled[_ngcontent-%COMP%]::-webkit-datetime-edit{color:inherit}.item[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{position:relative}.item[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]:before{content:attr(data-placeholder);position:absolute;left:2.5rem;top:50%;transform:translateY(-50%);color:#616879}.item[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]:focus:before, .item[_ngcontent-%COMP%]   input[type=date].filled[_ngcontent-%COMP%]:before{content:""}']})}}return n})();export{ee as LoginComponent};
