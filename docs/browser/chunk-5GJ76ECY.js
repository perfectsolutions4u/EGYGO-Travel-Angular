import{D as N,E as g,F as L,Fa as a,G as $,H as b,J as c,La as R,N as M,Na as V,O as p,P as S,R as f,U as j,W as O,X as C,ca as _,g as F,gc as E,h as d,i as s,n as u,o as I,rc as y,s as h,sa as k,ta as D,u as x,v as l,va as v,w as A,x as w}from"./chunk-D6PZ3OCI.js";var T=new O("NgxCountAnimationConfigs");function ot(i){return[{provide:T,useValue:i}]}function B(i){return i!=null&&`${i}`!="false"}function o(i,z=0){return U(i)?Number(i):z}function U(i){return!isNaN(parseFloat(i))&&!isNaN(Number(i))}var H=(()=>{class i{constructor(t,e){this.document=t,this.platformId=e,y(this.platformId)&&(this.scroll$=h(this.document,"scroll").pipe(f(50,void 0,{leading:!0,trailing:!0}),c()))}overrideScrollListener(t){this.scroll$=h(t,"scroll").pipe(f(50,void 0,{leading:!0,trailing:!0}),c())}get interval(){return this._interval?this._interval:this._interval=l(0,s).pipe(c())}static{this.\u0275fac=function(e){return new(e||i)(C(E),C(v))}}static{this.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),G=i=>i*(2-i),st=(()=>{class i{set detectLayoutChanges(t){this._detectLayoutChanges=B(t)}get detectLayoutChanges(){return this._detectLayoutChanges}set maximumFractionDigits(t){this._maximumFractionDigits=o(t,0)}get maximumFractionDigits(){return this._maximumFractionDigits}set minimumFractionDigits(t){this._minimumFractionDigits=o(t,0)}get minimumFractionDigits(){return this._minimumFractionDigits}set ngxCountAnimation(t){this.zone.runOutsideAngular(()=>{this.count$.next(o(t,0))})}set duration(t){this.zone.runOutsideAngular(()=>{this.duration$.next(o(t,2e3))})}set durationFromValue(t){this.zone.runOutsideAngular(()=>{let e=o(t);this.duration$.next(e>100?1500:e>10?1e3:e>3?700:e>1?400:0)})}set initialStartDelay(t){this._initialStartDelay=o(t,0)}get initialStartDelay(){return this._initialStartDelay}constructor(t,e,m,r,P,n){this.zone=t,this.countService=e,this.elRef=m,this.renderer=r,this.platformId=P,this.startAnimation=new D,this.endAnimation=new D,this._detectLayoutChanges=!1,this._maximumFractionDigits=0,this._minimumFractionDigits=0,this._initialStartDelay=0,this.oldCount=0,this.count$=new d(0),this.duration$=new d(2e3),this.currentCount$=this.createCurrentCountObservable(),this.destroy$=new F,n&&(n.duration!==void 0&&(this.duration=n.duration),n.detectLayoutChanges!==void 0&&(this.detectLayoutChanges=n.detectLayoutChanges),n.maximumFractionDigits!==void 0&&(this.maximumFractionDigits=n.maximumFractionDigits),n.minimumFractionDigits!==void 0&&(this.minimumFractionDigits=n.minimumFractionDigits))}ngOnInit(){this.elRef.nativeElement.classList.add("ngx-count-animation"),y(this.platformId)&&this.initializeCountAnimation()}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}initializeCountAnimation(){this.renderer.setProperty(this.elRef.nativeElement,"innerHTML",0),this.zone.runOutsideAngular(()=>{this.checkIsInViewport?this.startCount():this.setupViewportCheck()})}get checkIsInViewport(){return this.elRef.nativeElement.getBoundingClientRect().y<window.innerHeight}setupViewportCheck(){A(this.detectLayoutChanges?l(100,s):x(0),this.countService.scroll$).pipe(w(()=>this.checkIsInViewport),p(this.destroy$),N(1)).subscribe(()=>this.startCount())}startCount(){this.currentCount$.pipe(g(this.initialStartDelay),p(this.destroy$)).subscribe(t=>{this.renderer.setProperty(this.elRef.nativeElement,"innerHTML",t.toLocaleString(["de-ch"],{maximumFractionDigits:Math.max(this.minimumFractionDigits,this.maximumFractionDigits),minimumFractionDigits:this.minimumFractionDigits}))})}createCurrentCountObservable(){return I([this.count$,this.duration$]).pipe(g(100),M(([t,e])=>this.calculateCurrentCount(t,e)))}calculateCurrentCount(t,e){let m=s.now();return this.startAnimation.emit(),this.countService.interval.pipe(u(()=>s.now()-m),u(r=>r/e),S(r=>r<=1),u(G),u(r=>this.oldCount+Math.round((t-this.oldCount)*r*100)/100),$(t),b(()=>{this.oldCount=t,this.endAnimation.emit()}),L())}static{this.\u0275fac=function(e){return new(e||i)(a(V),a(H),a(k),a(R),a(v),a(T,8))}}static{this.\u0275dir=_({type:i,selectors:[["","ngxCountAnimation",""]],inputs:{detectLayoutChanges:"detectLayoutChanges",maximumFractionDigits:"maximumFractionDigits",minimumFractionDigits:"minimumFractionDigits",ngxCountAnimation:"ngxCountAnimation",duration:"duration",durationFromValue:"durationFromValue",initialStartDelay:"initialStartDelay"},outputs:{startAnimation:"startAnimation",endAnimation:"endAnimation"},standalone:!0})}}return i})();export{ot as a,st as b};
